{"version":3,"sources":["capitamap.json"],"names":["module","exports"],"mappings":"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","file":"capitamap.357ea75a.js","sourceRoot":"../src","sourcesContent":["module.exports = {\n\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"description\": \"A world map showing the C02 emissions per capita of each country.\",\n  \"width\": 900,\n  \"padding\": 5,\n\n\n  \"data\": \n  [\n    {\n      \"name\": \"env\",\n      \"url\": \"data/climate-change3.csv\",\n      \"format\": {\"type\": \"csv\", \"parse\": \"auto\"},\n      \"transform\": [\n        { \"type\": \"filter\", \"expr\":\"datum.Year == Year\"}\n      ]\n    },\n    {\n      \"name\": \"world\",\n      \"url\": \"data/world-110m.json\",\n      \"format\": {\"type\": \"topojson\", \"feature\": \"countries\"},\n      \"transform\": [\n        { \"type\": \"lookup\", \"from\": \"env\", \"key\": \"id\", \"fields\": [\"id\"], \"values\": [\"Year\", \"Country\", \"Population\", \"CO2PerCapita\", \"CO2Total\", \"CO2PerGDP\", \"Rank\"]}, \n        { \"type\": \"filter\", \"expr\": \"datum.Year == Year\"},\n        { \"type\": \"filter\", \"expr\": \"datum.CO2PerCapita != null\"},\n        {\n          \"type\": \"window\",\n          \"sort\": {\"field\": \"CO2PerCapita\", \"order\": \"descending\"},\n          \"ops\": [\"row_number\"], \"as\": [\"Rank\"]\n        }\n      ]\n    },\n    {\n      \"name\": \"graticule\",\n      \"transform\": [\n        { \"type\": \"graticule\", \"step\": [15, 15] }\n      ]\n    }\n  ],\n\n  \"projections\": \n  [\n    {\n      \"name\": \"projection\",\n      \"type\": \"mercator\",\n      \"scale\": {\"signal\": \"scale\"},\n      \"rotate\": [{\"signal\": \"rotateX\"}, 0, 0],\n      \"center\": [0, {\"signal\": \"centerY\"}],\n      \"translate\": [{\"signal\": \"tx\"}, {\"signal\": \"ty\"}]\n    }\n  ],\n\n  \"scales\": \n  [\n    {\n      \"name\": \"color\",\n      \"type\": \"linear\",\n      \"domain\": [0, 16],\n      \"range\": {\"scheme\": \"blues\", \"count\": 50}\n    }\n  ],\n\n  \"legends\": \n  [\n    {\n      \"fill\": \"color\",\n      \"orient\": \"none\",\n      \"title\": \"CO2 Emissions Per Capita\",\n      \"format\": \"1\",\n      \"legendX\": 1000,\n      \"legendY\": -150\n    }\n  ],\n\n  \"marks\": [\n    {\n      \"type\": \"shape\",\n      \"from\": {\"data\": \"world\"},\n      \"encode\": {\n        \"enter\": \n        { \n          \"tooltip\": \n          {\n            \"signal\":\"datum\"\n          }\n        },\n        \"update\": { \n          \"fill\": {\"scale\": \"color\", \"field\": \"CO2PerCapita\"},\n          \"strokeWidth\": {\"signal\": \"0.5\"},\n          \"stroke\": {\"value\":\"#000\"},\n          \"zindex\": {\"value\": 0}\n        },\n        \"hover\": {\n          \"strokeWidth\": {\"signal\": \"1.5\"},\n          \"stroke\": {\"value\":\"firebrick\"},\n          \"zindex\": {\"value\": 1}\n        }\n      },\n      \"transform\": [\n        { \"type\": \"geoshape\", \"projection\": \"projection\" }\n      ]\n    }\n  ],\n\n  \"signals\": [\n    {\"name\": \"k\", \"value\": 10},\n    { \"name\": \"tx\", \"update\": \"width / 2\" },\n    { \"name\": \"ty\", \"update\": \"height / 2\" },\n    { \"name\": \"Year\", \"value\": 1992,\n      \"bind\": {\"input\": \"range\", \"min\": 1992, \"max\": 2014, \"step\": 1}\n    },\n    {\n      \"name\": \"scale\",\n      \"value\": 150,\n      \"on\": [{\n        \"events\": {\"type\": \"wheel\", \"consume\": true},\n        \"update\": \"clamp(scale * pow(1.0005, -event.deltaY * pow(16, event.deltaMode)), 150, 3000)\"\n      }]\n    },\n    {\n      \"name\": \"angles\",\n      \"value\": [0, 0],\n      \"on\": [{\n        \"events\": \"mousedown\",\n        \"update\": \"[rotateX, centerY]\"\n      }]\n    },\n    {\n      \"name\": \"cloned\",\n      \"value\": null,\n      \"on\": [{\n        \"events\": \"mousedown\",\n        \"update\": \"copy('projection')\"\n      }]\n    },\n    {\n      \"name\": \"start\",\n      \"value\": null,\n      \"on\": [{\n        \"events\": \"mousedown\",\n        \"update\": \"invert(cloned, xy())\"\n      }]\n    },\n    {\n      \"name\": \"drag\", \"value\": null,\n      \"on\": [{\n        \"events\": \"[mousedown, window:mouseup] > window:mousemove\",\n        \"update\": \"invert(cloned, xy())\"\n      }]\n    },\n    {\n      \"name\": \"delta\", \"value\": null,\n      \"on\": [{\n        \"events\": {\"signal\": \"drag\"},\n        \"update\": \"[drag[0] - start[0], start[1] - drag[1]]\"\n      }]\n    },\n    {\n      \"name\": \"rotateX\", \"value\": 0,\n      \"on\": [{\n        \"events\": {\"signal\": \"delta\"},\n        \"update\": \"angles[0] + delta[0]\"\n      }]\n    },\n    {\n      \"name\": \"centerY\", \"value\": 0,\n      \"on\": [{\n        \"events\": {\"signal\": \"delta\"},\n        \"update\": \"clamp(angles[1] + delta[1], -60, 60)\"\n      }]\n    }\n  ]\n\n};"]}